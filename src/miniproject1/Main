package miniproject1;
import java.util.List;
import java.util.Scanner;

//Client (User) 와 상호작용하는 Console (View layer)
public class Main {
    private static BoardController controller = new BoardController();
    private static Scanner scanner = new Scanner(System.in);
    public static void main(String[] args) {
        while (true) {
            //메뉴 출력 (상시)
            showMenu();
            int choice = scanner.nextInt();
            scanner.nextLine(); // 줄바꿈 문자 처리

            switch (choice) {
                case 1:
                    createBoard();
                    break;
                case 2:
                    viewBoardList();
                    break;
                case 3:
                    updateBoard();
                    break;
                case 4:
                    deleteBoard();
                    break;
                case 5:
                    System.out.println("프로그램을 종료합니다.");
                    scanner.close();
                    return;
                default:
                    System.out.println("올바른 번호를 선택하세요.");
            }
        }
    }
  /*-------------------------------------------------함수구현------------------------------------------------------------ */
    // 메뉴 출력
    private static void showMenu() {
        System.out.println("1. 게시물 등록");
        System.out.println("2. 게시물 목록 조회");
        System.out.println("3. 게시물 수정");
        System.out.println("4. 게시물 삭제");
        System.out.println("5. 종료");
        System.out.print("선택: ");
    }

    // 게시물 등록
    private static void createBoard() {
        System.out.println("제목: ");
        String title = scanner.nextLine();
        System.out.println("내용:");
        String content = scanner.nextLine();
        System.out.println("작성자:");
        String writer = scanner.nextLine();

        BoardDTO board = new BoardDTO();
        board.setTitle(title);
        board.setContent(content);
        board.setWriter(writer);
        board.setViewCnt(0); // 초기 조회 수 0
        board.setDeleteYn("N"); // 삭제 여부 초기 값
        board.setInsertDate(new java.util.Date());

        controller.createBoard(board); 
        System.out.println("게시물이 등록되었습니다.");
    }

    // 모든 게시물 목록 조회
    private static void viewBoardList() {
        List<BoardDTO> boardList = controller.getBoardList();
        for (BoardDTO board : boardList) {
            System.out.println(board.getIdx() + " | " + board.getTitle() + " | " + board.getWriter() + " | " + board.getInsertDate());
        }
    }

    // 게시물 수정
    private static void updateBoard() {

       //조건문 추가해야함 (수정자의 입력한 비밀번호가 일치 할 경우 실행.)
        System.out.println("수정할 게시물 번호:");
        int idx = scanner.nextInt(); scanner.nextLine(); // 줄바꿈 문자 처리
        System.out.println("새 제목:");
        String title = scanner.nextLine();
        System.out.println("새 내용:");
        String content = scanner.nextLine();
        System.out.println("새 작성자:");
        String writer = scanner.nextLine();
        //입력값은 값으로 Set 하고 DB 테이블에 저장한다.
        BoardDTO board = new BoardDTO();
        board.setIdx(idx);
        board.setTitle(title);
        board.setContent(content);
        board.setWriter(writer);
        
        board.setUpdateDate(new java.util.Date());

        controller.updateBoard(board);
        System.out.println("게시물이 수정되었습니다.");
    }

    // 게시물 삭제
    private static void deleteBoard() {
        System.out.println("삭제할 게시물 번호:");
        int idx = scanner.nextInt();

        controller.deleteBoard(idx);
        System.out.println("게시물이 삭제되었습니다.");
    }
}